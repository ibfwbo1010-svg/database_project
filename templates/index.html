<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Vietnam K-POP Idol Trend</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header>
    <h1>Vietnam K-POP Idol Trend</h1>
    <p>2019ë…„ ë°ì´í„° ê¸°ë°˜ í•œë¥˜ íŠ¸ë Œë“œ ë¶„ì„</p>
</header>

<main>

<form method="get">
    <select name="month" onchange="this.form.submit()">
        {% for m in range(1,13) %}
        <option value="{{ m }}" {% if selected_month == m|string %}selected{% endif %}>
            {{ m }}ì›”
        </option>
        {% endfor %}
    </select>
</form>

{% if visitor %}
<p><strong>ğŸ“Œ {{ selected_month }}ì›” ë² íŠ¸ë‚¨ ê´€ê´‘ê°:</strong>
   ì•½ {{ "{:,}".format(visitor.visitor_count) }}ëª…</p>
{% endif %}

<h2>ğŸ“Š ë² íŠ¸ë‚¨ ì»¤ë®¤ë‹ˆí‹° TOP í‚¤ì›Œë“œ</h2>
<ul>
{% for k in top_keywords %}
<li>#{{ k.keyword }} ({{ k.total_count }})</li>
{% endfor %}
</ul>

<h2>ğŸ”¥ TOP 5 ì•„ì´ëŒ (ì»¤ë®¤ë‹ˆí‹° ë°˜ì˜)</h2>
<div class="idol-grid">
{% for idol in top_idols %}
<a href="/idol/{{ idol.id }}" class="idol-card">
    <img src="{{ url_for('static',
        filename='images/' ~ (idol.image if idol.image else 'default.jpg')) }}">
    <h3>{{ idol.name }}</h3>
    <p>{{ idol.group_name }}</p>
    <strong>{{ idol.adjusted_score | round(1) }}</strong>
</a>
{% endfor %}
</div>

{% if explanation %}
<p><em>{{ explanation }}</em></p>
{% endif %}

<hr>

<h3>ğŸ“ ê¸€ì“°ê¸°</h3>
<form method="post" action="/post">
    <input name="title" placeholder="ì œëª©"><br>
    <textarea name="content" placeholder="ë‚´ìš©"></textarea><br>
    <button>ë“±ë¡</button>
</form>

<hr>

{% for post in posts %}
<div>
    <h4>{{ post.title }}</h4>
    <p>{{ post.content }}</p>
    <form method="post" action="/comment/{{ post.id }}">
        <input name="content" placeholder="ëŒ“ê¸€">
        <button>ëŒ“ê¸€</button>
    </form>
</div>
<hr>
{% endfor %}

</main>

</body>
</html>
