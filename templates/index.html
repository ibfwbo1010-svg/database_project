<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Vietnam K-POP Idol Trend</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header>
    <h1>ğŸ‡»ğŸ‡³ Vietnam K-POP Idol Trend</h1>
    <p>ë² íŠ¸ë‚¨ ì»¤ë®¤ë‹ˆí‹° ë°ì´í„° ê¸°ë°˜ í•œë¥˜ ì•„ì´ëŒ íŠ¸ë Œë“œ ë¶„ì„</p>
</header>

<main class="container">

    <!-- ========================= -->
    <!-- ì›” ì„ íƒ -->
    <!-- ========================= -->
    <section style="text-align:center; margin:30px 0;">
        <form method="get" action="/">
            <select name="month" onchange="this.form.submit()">
                {% for m in range(1, 13) %}
                <option value="{{ m }}" {% if selected_month == m|string %}selected{% endif %}>
                    {{ m }}ì›”
                </option>
                {% endfor %}
            </select>
        </form>

        {% if visitor %}
        <p style="margin-top:10px;">
            âœˆï¸ 2019ë…„ {{ selected_month }}ì›” ë² íŠ¸ë‚¨ ë°©í•œ ê´€ê´‘ê° ìˆ˜:
            <strong>{{ visitor.visitor_count }}</strong> ëª…
        </p>
        {% endif %}
    </section>

    <!-- ========================= -->
    <!-- ë² íŠ¸ë‚¨ ì»¤ë®¤ë‹ˆí‹° TOP í‚¤ì›Œë“œ (ë³µêµ¬ ë²„ì „) -->
    <!-- ========================= -->
    <section>
        <h2>ğŸ”¥ {{ selected_month }}ì›” ë² íŠ¸ë‚¨ ì»¤ë®¤ë‹ˆí‹° TOP í‚¤ì›Œë“œ</h2>

        {% if top_keywords %}
        <div style="display:flex; flex-wrap:wrap; gap:10px;">
            {% for k in top_keywords %}
            <span style="
                background:#ffeeba;
                padding:6px 12px;
                border-radius:20px;
                font-weight:bold;
            ">
                #{{ k.keyword }} ({{ k.total_count }})
            </span>
            {% endfor %}
        </div>
        {% else %}
        <p>í‚¤ì›Œë“œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}
    </section>

    <!-- ========================= -->
    <!-- â­ ì›”ë³„ ì¸ê¸°ë„ TOP 5 ì•„ì´ëŒ -->
    <!-- ========================= -->
    <section>
        <h2>ğŸ† {{ selected_month }}ì›” ì¸ê¸°ë„ TOP 5 ì•„ì´ëŒ</h2>

        {% if top5_idols %}
        <div class="idol-grid">
            {% for idol in top5_idols %}
            <a href="/idol/{{ idol.id }}" class="idol-card top">
                <img src="{{ url_for('static', filename='images/' ~ idol.image) }}">
                <h3>{{ idol.name }}</h3>
                <p>{{ idol.group_name }}</p>
                <strong>ì¸ê¸°ë„ {{ idol.popularity_score }}</strong>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <p>TOP 5 ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}
    </section>

    <!-- ========================= -->
    <!-- ì „ì²´ ì•„ì´ëŒ -->
    <!-- ========================= -->
    <section>
        <h2>ğŸ¤ ì „ì²´ ì•„ì´ëŒ</h2>

        <div class="idol-grid">
            {% for idol in idols %}
            <a href="/idol/{{ idol.id }}" class="idol-card">
                <img src="{{ url_for('static', filename='images/' ~ idol.image) }}">
                <h4>{{ idol.name }}</h4>
                <p>{{ idol.group_name }}</p>
            </a>
            {% endfor %}
        </div>
    </section>

</main>

<footer style="text-align:center; margin:40px 0;">
    <p>Â© 2025 Vietnam K-POP Idol Trend Service</p>
</footer>

</body>
</html>
